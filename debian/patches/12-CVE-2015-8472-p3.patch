# git diff ad224c6907e8a274f2679eae4c2e3085fdc7e8c8^ ad224c6907e8a274f2679eae4c2e3085fdc7e8c8 
# without ANNOUNCE, CHANGES, ...

Index: libpng-1.2.44/pngset.c
===================================================================
--- libpng-1.2.44.orig/pngset.c	2015-12-27 17:34:05.000000000 +0100
+++ libpng-1.2.44/pngset.c	2015-12-27 17:34:05.000000000 +0100
@@ -453,8 +453,8 @@
    if (png_ptr == NULL || info_ptr == NULL)
       return;
 
-   max_palette_length = (png_ptr->color_type == PNG_COLOR_TYPE_PALETTE) ?
-      (1 << png_ptr->bit_depth) : PNG_MAX_PALETTE_LENGTH;
+   max_palette_length = (info_ptr->color_type == PNG_COLOR_TYPE_PALETTE) ?
+      (1 << info_ptr->bit_depth) : PNG_MAX_PALETTE_LENGTH;
 
    if (num_palette < 0 || num_palette > (int)max_palette_length)
    {
